<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="John Bogovic">
<meta name="author" content="Caleb Hulbert">
<meta name="dcterms.date" content="2024-04-02">
<meta name="description" content="Learn to get and set arbitrary parts of an attribute hierarchy with the N5 API.">

<title>ImgLib2 news and tutorials - N5 attribute paths</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="ImgLib2 news and tutorials - N5 attribute paths">
<meta property="og:description" content="Learn to get and set arbitrary parts of an attribute hierarchy with the N5 API.">
<meta property="og:image" content="https://imglib.github.io/imglib2-blog/posts/2024-04-02-n5-attribute-paths-thumbnail.png">
<meta property="og:site_name" content="ImgLib2 news and tutorials">
<meta property="og:image:height" content="300">
<meta property="og:image:width" content="675">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../imglib2-logo-header.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">ImgLib2 news and tutorials</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../about.html"> 
<span class="menu-text">ImgLib2</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/imglib"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://fosstodon.org/@imglib2"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <div class="quarto-title-block"><div><h1 class="title">N5 attribute paths</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button" data-quarto-source-url="https://github.com/imglib/imglib2-blog/blob/main/posts/2024-04-02-n5-attribute-paths.ipynb">View Source</a></li></ul></div></div>
                  <div>
        <div class="description">
          Learn to get and set arbitrary parts of an attribute hierarchy with the N5 API.
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">n5</div>
                <div class="quarto-category">attributes</div>
                <div class="quarto-category">metadata</div>
                <div class="quarto-category">tutorial</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Authors</div>
      <div class="quarto-title-meta-contents">
               <p>John Bogovic </p>
               <p>Caleb Hulbert </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 2, 2024</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#arrays" id="toc-arrays" class="nav-link active" data-scroll-target="#arrays">Arrays</a></li>
  <li><a href="#objects" id="toc-objects" class="nav-link" data-scroll-target="#objects">Objects</a></li>
  <li><a href="#mixing-object-and-array-indexing" id="toc-mixing-object-and-array-indexing" class="nav-link" data-scroll-target="#mixing-object-and-array-indexing">Mixing object and array indexing</a></li>
  <li><a href="#removing-attributes-and-dealing-with-nulls" id="toc-removing-attributes-and-dealing-with-nulls" class="nav-link" data-scroll-target="#removing-attributes-and-dealing-with-nulls">Removing attributes and dealing with nulls</a></li>
  <li><a href="#keys-are-paths" id="toc-keys-are-paths" class="nav-link" data-scroll-target="#keys-are-paths">Keys are paths</a></li>
  <li><a href="#warnings-and-caveats" id="toc-warnings-and-caveats" class="nav-link" data-scroll-target="#warnings-and-caveats">Warnings and caveats</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div id="ef2f3d2c" class="cell" data-execution_count="1">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>mavenRepo scijava<span class="op">.</span><span class="fu">public</span> https<span class="op">:</span><span class="co">//maven.scijava.org/content/groups/public</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>maven org<span class="op">.</span><span class="fu">scijava</span><span class="op">:</span>scijava<span class="op">-</span>common<span class="op">:</span><span class="fl">2.97.0</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>maven net<span class="op">.</span><span class="fu">imglib2</span><span class="op">:</span>imglib2<span class="op">:</span><span class="fl">6.2.0</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>maven org<span class="op">.</span><span class="fu">janelia</span><span class="op">.</span><span class="fu">saalfeldlab</span><span class="op">:</span>n5<span class="op">:</span><span class="fl">3.1.2</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>maven org<span class="op">.</span><span class="fu">janelia</span><span class="op">.</span><span class="fu">saalfeldlab</span><span class="op">:</span>n5<span class="op">-</span>imglib2<span class="op">:</span><span class="fl">7.0.0</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>maven org<span class="op">.</span><span class="fu">janelia</span><span class="op">.</span><span class="fu">saalfeldlab</span><span class="op">:</span>n5<span class="op">-</span>universe<span class="op">:</span><span class="fl">1.3.1</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">nio</span><span class="op">.</span><span class="im">file</span><span class="op">.*;</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.*;</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">stream</span><span class="op">.*;</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">java</span><span class="op">.</span><span class="im">util</span><span class="op">.</span><span class="im">concurrent</span><span class="op">.*;</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">com</span><span class="op">.</span><span class="im">google</span><span class="op">.</span><span class="im">gson</span><span class="op">.*;</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">net</span><span class="op">.</span><span class="im">imglib2</span><span class="op">.*;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">net</span><span class="op">.</span><span class="im">imglib2</span><span class="op">.</span><span class="im">img</span><span class="op">.</span><span class="im">array</span><span class="op">.*;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">net</span><span class="op">.</span><span class="im">imglib2</span><span class="op">.</span><span class="im">type</span><span class="op">.</span><span class="im">numeric</span><span class="op">.</span><span class="im">real</span><span class="op">.*;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">net</span><span class="op">.</span><span class="im">imglib2</span><span class="op">.</span><span class="im">view</span><span class="op">.*;</span></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">net</span><span class="op">.</span><span class="im">imglib2</span><span class="op">.</span><span class="im">util</span><span class="op">.*;</span></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">janelia</span><span class="op">.</span><span class="im">saalfeldlab</span><span class="op">.</span><span class="im">n5</span><span class="op">.*;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">janelia</span><span class="op">.</span><span class="im">saalfeldlab</span><span class="op">.</span><span class="im">n5</span><span class="op">.</span><span class="im">imglib2</span><span class="op">.*;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="kw">import</span> <span class="im">org</span><span class="op">.</span><span class="im">janelia</span><span class="op">.</span><span class="im">saalfeldlab</span><span class="op">.</span><span class="im">n5</span><span class="op">.</span><span class="im">universe</span><span class="op">.*;</span></span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">pathInfo</span><span class="op">(</span>Path p<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a>        <span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="bu">String</span><span class="op">.</span><span class="fu">format</span><span class="op">(</span><span class="st">"</span><span class="sc">%s</span><span class="st"> is </span><span class="sc">%d</span><span class="st"> bytes"</span><span class="op">,</span> p<span class="op">,</span> Files<span class="op">.</span><span class="fu">size</span><span class="op">(</span>p<span class="op">)));</span> </span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">catch</span><span class="op">(</span><span class="bu">IOException</span> e <span class="op">){}</span></span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">static</span> <span class="dt">void</span> <span class="fu">printBlocks</span><span class="op">(</span><span class="bu">String</span> path<span class="op">)</span> <span class="kw">throws</span> <span class="bu">IOException</span> <span class="op">{</span></span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">try</span> <span class="op">(</span>Stream<span class="op">&lt;</span>Path<span class="op">&gt;</span> stream <span class="op">=</span> Files<span class="op">.</span><span class="fu">walk</span><span class="op">(</span>Paths<span class="op">.</span><span class="fu">get</span><span class="op">(</span>path<span class="op">)))</span> <span class="op">{</span></span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a>        stream<span class="op">.</span><span class="fu">filter</span><span class="op">(</span>Files<span class="op">::</span>isRegularFile<span class="op">)</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a>            <span class="op">.</span><span class="fu">filter</span><span class="op">(</span> p <span class="op">-&gt;</span> p<span class="op">.</span><span class="fu">getFileName</span><span class="op">().</span><span class="fu">toString</span><span class="op">().</span><span class="fu">matches</span><span class="op">(</span><span class="st">"[0-9]"</span><span class="op">))</span></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a>                <span class="op">.</span><span class="fu">forEach</span><span class="op">(</span> x <span class="op">-&gt;</span> <span class="op">{</span> <span class="fu">pathInfo</span><span class="op">(</span>x<span class="op">);</span> <span class="op">});</span></span>
<span id="cb1-37"><a href="#cb1-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb1-38"><a href="#cb1-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Recall that structured metadata attributes can be written to a container using</p>
<p><code>N5Writer.setAttribute(String group, String key, Object value)</code></p>
<p>and read using</p>
<p><code>N5Reader.getAttribute(String group, String key, Class class)</code>.</p>
<p>These basics are described in the <a href="https://imglib.github.io/imglib2-blog/posts/2024-02-27-n5-tutorial-basic/#metadata">N5 API Basics Tutorial</a>. In this tutorial, we will show that methods accept more sophisticated expressions for the key that we call “attribute paths.” These enable you to set and access any part of the attribute hierarchy.</p>
<section id="arrays" class="level2">
<h2 class="anchored" data-anchor-id="arrays">Arrays</h2>
<p>We’ll start by discussing array attribute indexing. First make some array attribute:</p>
<div id="fe91009f" class="cell" data-execution_count="2">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> n5 <span class="op">=</span> <span class="kw">new</span> <span class="fu">N5Factory</span><span class="op">().</span><span class="fu">openWriter</span><span class="op">(</span><span class="st">"attribute-demo.n5"</span><span class="op">);</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> group <span class="op">=</span> <span class="st">"arrayDemo"</span><span class="op">;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">createGroup</span><span class="op">(</span>group<span class="op">);</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="kw">new</span> <span class="dt">double</span><span class="op">[]{</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span> <span class="op">});</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="dt">double</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>[5.0, 6.0, 7.0, 8.0]</code></pre>
</div>
</div>
<p>Individual elements of the array can be retrieved by adding <code>[i]</code> after the key, where <code>i</code> is an integer (zero-based indexing). N5 will return null for indexes outside the bounds of the array, including for negative values.</p>
<div id="9026d5f6" class="cell" data-execution_count="3">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[0]"</span><span class="op">,</span> <span class="dt">double</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span>  <span class="co">// returns 5.0</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[2]"</span><span class="op">,</span> <span class="dt">double</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span>  <span class="co">// returns 7.0</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[9]"</span><span class="op">,</span> <span class="dt">double</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span>  <span class="co">// returns null</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[-1]"</span><span class="op">,</span> <span class="dt">double</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span> <span class="co">// returns null</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>This syntax lets you set individual array elements as well:</p>
<div id="1b68a54e" class="cell" data-execution_count="4">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[1]"</span><span class="op">,</span> <span class="fl">0.6</span><span class="op">);</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="dt">double</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="4">
<pre><code>[5.0, 0.6, 7.0, 8.0]</code></pre>
</div>
</div>
<p>The array will grow if we set a value outside the range of an array. The array will be filled with zeros if the array is numeric.</p>
<div id="99c9f81a" class="cell" data-execution_count="5">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[6]"</span><span class="op">,</span> <span class="fl">99.99</span><span class="op">);</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="dt">double</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="5">
<pre><code>[5.0, 0.6, 7.0, 8.0, 0.0, 0.0, 99.99]</code></pre>
</div>
</div>
<div id="288baf9b" class="cell" data-execution_count="6">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[-5]"</span><span class="op">,</span> <span class="op">-</span><span class="dv">5</span><span class="op">);</span> <span class="co">// does nothing</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="dt">double</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>[5.0, 0.6, 7.0, 8.0, 0.0, 0.0, 99.99]</code></pre>
</div>
</div>
<div id="7d8ed446" class="cell" data-execution_count="7">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>IntStream<span class="op">.</span><span class="fu">range</span><span class="op">(</span><span class="dv">0</span><span class="op">,</span> <span class="dv">4</span><span class="op">).</span><span class="fu">forEach</span><span class="op">(</span> i <span class="op">-&gt;</span> <span class="op">{</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"matrix["</span><span class="op">+</span>i<span class="op">+</span><span class="st">"][3]"</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"matrix["</span><span class="op">+</span>i<span class="op">+</span><span class="st">"]["</span><span class="op">+</span>i<span class="op">+</span><span class="st">"]"</span><span class="op">,</span> <span class="dv">2</span><span class="op">*(</span>i<span class="op">+</span><span class="dv">1</span><span class="op">));</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="op">});</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"matrix"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="7">
<pre><code>[[2,0,0,0],[0,4,0,0],[0,0,6,0],[0,0,0,8]]</code></pre>
</div>
</div>
<p>An array that is not numeric that needs to grown will be filled with <code>null</code>s.</p>
<div id="2822f20b" class="cell" data-execution_count="8">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"stringArray"</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">String</span><span class="op">[]{</span><span class="st">"a"</span><span class="op">,</span> <span class="st">"b"</span><span class="op">});</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"stringArray[6]"</span><span class="op">,</span> <span class="st">"g"</span><span class="op">);</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"stringArray"</span><span class="op">,</span> <span class="bu">String</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>[a, b, null, null, null, null, g]</code></pre>
</div>
</div>
<p>N5’s <code>setAttribute</code> will always do what is requested when possible, even if it will overwrite data. If safety is necessary, developers should manually check if an attribute key is present. Use of the type <code>JsonElement</code> type is the most safe, because a non-null <code>JsonElement</code> will be returned if data of any type is present at the requested key.</p>
<div id="5a9f3e0a" class="cell" data-execution_count="9">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co">// overwrite the previous array</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">String</span><span class="op">[]{</span><span class="st">"destroy"</span><span class="op">});</span>  <span class="co">// array is now [ "destroy" ]</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="bu">String</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="9">
<pre><code>[destroy]</code></pre>
</div>
</div>
<div id="d06a2ba4" class="cell" data-execution_count="10">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span><span class="op">(</span> n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span> group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span> <span class="op">)</span> <span class="op">==</span> <span class="kw">null</span> <span class="op">)</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>    n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">String</span><span class="op">[]{});</span>   <span class="co">// array is still [ "destroy" ]</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="bu">Arrays</span><span class="op">.</span><span class="fu">toString</span><span class="op">(</span>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="bu">String</span><span class="op">[].</span><span class="fu">class</span><span class="op">));</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>[destroy]</code></pre>
</div>
</div>
</section>
<section id="objects" class="level2">
<h2 class="anchored" data-anchor-id="objects">Objects</h2>
<p>JSON objects are structures with “fields” that can be referenced by their String name. One way to set objects is by using a <code>Map</code>.</p>
<div id="61c8141c" class="cell" data-execution_count="11">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> group <span class="op">=</span> <span class="st">"objectDemo"</span><span class="op">;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">createGroup</span><span class="op">(</span>group<span class="op">);</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> a <span class="op">=</span> <span class="bu">Collections</span><span class="op">.</span><span class="fu">singletonMap</span><span class="op">(</span><span class="st">"a"</span><span class="op">,</span> <span class="st">"A"</span><span class="op">);</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"obj"</span><span class="op">,</span> a <span class="op">);</span> </span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"obj"</span><span class="op">,</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="11">
<pre><code>{a=A}</code></pre>
</div>
</div>
<p>The value for an object’s field can be any type, even another object. Individual fields for an object can be accessed by appending <code>/&lt;field-name&gt;</code> to the attribute name. For example:</p>
<div id="1e7f51b1" class="cell" data-execution_count="12">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> b <span class="op">=</span> <span class="bu">Collections</span><span class="op">.</span><span class="fu">singletonMap</span><span class="op">(</span><span class="st">"b"</span><span class="op">,</span> <span class="st">"B"</span><span class="op">);</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co">// set the value of obj/a to {b=B}</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"obj/a"</span><span class="op">,</span> b<span class="op">);</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"obj"</span><span class="op">,</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>{a={b=B}}</code></pre>
</div>
</div>
<div id="ac0fe5e3" class="cell" data-execution_count="13">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"obj/a"</span><span class="op">,</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>{b=B}</code></pre>
</div>
</div>
<p>Notice that it is possible to repeatedly access subfields of nested objects. In fact, the set of all attributes in an N5 group is usually itself an object! We call it the “root object” and access it with the the key <code>"/"</code></p>
<div id="2a74223e" class="cell" data-execution_count="14">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>{obj={a={b=B}}}</code></pre>
</div>
</div>
<p>For the following examples, we’ll use the class <code>Pet</code> defined here:</p>
<div id="8299262b" class="cell" data-execution_count="15">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="kw">class</span> Pet <span class="op">{</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>    <span class="bu">String</span> name<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="fu">Pet</span><span class="op">(</span><span class="bu">String</span> name<span class="op">,</span> <span class="dt">int</span> age<span class="op">)</span> <span class="op">{</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">name</span> <span class="op">=</span> name<span class="op">;</span></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>        <span class="kw">this</span><span class="op">.</span><span class="fu">age</span> <span class="op">=</span> age<span class="op">;</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">public</span> <span class="bu">String</span> <span class="fu">toString</span><span class="op">()</span> <span class="op">{</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="bu">String</span><span class="op">.</span><span class="fu">format</span><span class="op">(</span><span class="st">"pet </span><span class="sc">%s</span><span class="st"> is </span><span class="sc">%d</span><span class="st">"</span><span class="op">,</span> name<span class="op">,</span> age<span class="op">);</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div id="e95d2f5b" class="cell" data-execution_count="16">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"pet"</span><span class="op">,</span> <span class="kw">new</span> <span class="fu">Pet</span><span class="op">(</span><span class="st">"Pluto"</span><span class="op">,</span> <span class="dv">93</span><span class="op">));</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>Pet pet <span class="op">=</span> n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"pet"</span><span class="op">,</span> Pet<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>pet</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="16">
<pre><code>pet Pluto is 93</code></pre>
</div>
</div>
<div id="14933745" class="cell" data-execution_count="17">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"pet"</span><span class="op">,</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="17">
<pre><code>{name=Pluto, age=93.0}</code></pre>
</div>
</div>
<div id="d0d3dab7" class="cell" data-execution_count="18">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"pet/likes"</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">String</span><span class="op">[]{</span><span class="st">"Micky"</span><span class="op">});</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"pet"</span><span class="op">,</span> <span class="bu">Map</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="18">
<pre><code>{name=Pluto, age=93.0, likes=[Micky]}</code></pre>
</div>
</div>
</section>
<section id="mixing-object-and-array-indexing" class="level2">
<h2 class="anchored" data-anchor-id="mixing-object-and-array-indexing">Mixing object and array indexing</h2>
<p>This example sets the value of an integer inside several nested arrays and objects.</p>
<p>Note: When indexing an array, the path separators <code>/</code> before and after the index operator <code>[ ]</code> are optional</p>
<div id="ab8448d6" class="cell" data-execution_count="19">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">// remove all attributes </span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">removeAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">);</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"one/[2]/three/[4]"</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"one[2]three[0]"</span><span class="op">,</span> <span class="dv">12</span><span class="op">);</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>{"one":[null,null,{"three":[12,0,0,0,5]}]}</code></pre>
</div>
</div>
</section>
<section id="removing-attributes-and-dealing-with-nulls" class="level2">
<h2 class="anchored" data-anchor-id="removing-attributes-and-dealing-with-nulls">Removing attributes and dealing with nulls</h2>
<p>We saw about that <code>removeAttribute</code> can be used to remove attributes. The first variant takes the group and attribute key as arguments, and returns nothing after removal. The second variant also takes a Class<t> argument and will return the removed object of type T if possible. If the value of the attribute cannot be parsed into the requested type, the attribute will not be removed, even if the key exists.</t></p>
<div id="a4665211" class="cell" data-execution_count="20">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> group <span class="op">=</span> <span class="st">"animals"</span><span class="op">;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">createGroup</span><span class="op">(</span>group<span class="op">);</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"cow"</span><span class="op">,</span> <span class="st">"moo"</span><span class="op">);</span></span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"dog"</span><span class="op">,</span> <span class="st">"woof"</span><span class="op">);</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"sheep"</span><span class="op">,</span> <span class="st">"baa"</span><span class="op">);</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>{"cow":"moo","dog":"woof","sheep":"baa"}</code></pre>
</div>
</div>
<div id="c13c8a45" class="cell" data-execution_count="21">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">removeAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"cow"</span><span class="op">);</span> <span class="co">// void method</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>{"dog":"woof","sheep":"baa"}</code></pre>
</div>
</div>
<div id="47f04352" class="cell" data-execution_count="22">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="bu">System</span><span class="op">.</span><span class="fu">out</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span> <span class="st">"The doggie says: "</span> <span class="op">+</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a>    n5<span class="op">.</span><span class="fu">removeAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"dog"</span><span class="op">,</span> <span class="bu">String</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="op">);</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>The doggie says: woof</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>{"sheep":"baa"}</code></pre>
</div>
</div>
<div id="11a10567" class="cell" data-execution_count="23">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">// throws an exception because the value of "sheep" is not an int</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="cf">try</span> <span class="op">{</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>    n5<span class="op">.</span><span class="fu">removeAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"sheep"</span><span class="op">,</span> <span class="dt">int</span><span class="op">.</span><span class="fu">class</span><span class="op">);</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="cf">catch</span><span class="op">(</span>N5Exception e <span class="op">){</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    <span class="bu">System</span><span class="op">.</span><span class="fu">err</span><span class="op">.</span><span class="fu">println</span><span class="op">(</span><span class="st">"An exception was thrown"</span><span class="op">);</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a><span class="co">// observe that the attribute was not removed</span></span>
<span id="cb43-9"><a href="#cb43-9" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stderr">
<pre><code>An exception was thrown</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>{"sheep":"baa"}</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>In the default implemenation, setting the value of an attribute to <code>null</code> will remove that attribute (i.e.&nbsp;the attribute’s key will be removed).</p>
<p>However, we strongly recommended using the <code>removeAttribute</code> methods when removing attributes, since setting an attribute to <code>null</code> can lead to inconsistent behaviour, depending on how the <code>N5Writer</code> was created (see below).</p>
<p>Setting an attribute path to <code>null</code> can even result in creating attributes along the path, regardless of whether <code>serializeNulls</code> is enabled or not.</p>
</div>
</div>
<p>In cases where it is useful to write the value <code>null</code> into the attributes, you must create an <code>N5Writer</code> using a <code>GsonBuilder</code> with <code>serializeNulls</code> enabled. This example writes a <code>null</code> value to the key <code>"attr"</code>.</p>
<div id="dd347c77" class="cell" data-execution_count="24">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> n5WithNulls <span class="op">=</span> <span class="kw">new</span> <span class="fu">N5Factory</span><span class="op">()</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">gsonBuilder</span><span class="op">(</span><span class="kw">new</span> <span class="fu">GsonBuilder</span><span class="op">().</span><span class="fu">serializeNulls</span><span class="op">())</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">openWriter</span><span class="op">(</span><span class="st">"attribute-demo.n5"</span><span class="op">);</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>n5WithNulls<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"attr"</span><span class="op">,</span> <span class="kw">null</span><span class="op">);</span></span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>n5WithNulls<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>{"sheep":"baa","attr":null}</code></pre>
</div>
</div>
</section>
<section id="keys-are-paths" class="level2">
<h2 class="anchored" data-anchor-id="keys-are-paths">Keys are paths</h2>
<p>Think about keys as paths into a hierarchy, where <code>/</code> separates levels of the hierarchy. Attribute methods support relative paths, where <code>.</code> refers to “this” path, and <code>..</code> refers to the parent path.</p>
<div id="c87e7b93" class="cell" data-execution_count="25">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> group <span class="op">=</span> <span class="st">"details"</span><span class="op">;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">createGroup</span><span class="op">(</span>group<span class="op">);</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"a/b/c"</span><span class="op">,</span> <span class="st">"tutorial"</span><span class="op">);</span></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>{"a":{"b":{"c":"tutorial"}}}</code></pre>
</div>
</div>
<p>The key <code>a/.</code> is equivalent to <code>a</code></p>
<div id="f0ef62a2" class="cell" data-execution_count="26">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"a/."</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>{"b":{"c":"tutorial"}}</code></pre>
</div>
</div>
<div id="fb4da1da" class="cell" data-execution_count="27">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"a/.."</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>{"a":{"b":{"c":"tutorial"}}}</code></pre>
</div>
</div>
<p>The parent of an array element refers to the array:</p>
<div id="81ad6d5a" class="cell" data-execution_count="28">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array"</span><span class="op">,</span> <span class="kw">new</span> <span class="bu">String</span><span class="op">[]{</span><span class="st">"Alice"</span><span class="op">,</span> <span class="st">"Bob"</span><span class="op">});</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"array[0]/.."</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="28">
<pre><code>["Alice","Bob"]</code></pre>
</div>
</div>
<p>Getting the parent attribute relative to the root will return <code>null</code></p>
<div id="d5ae2181" class="cell" data-execution_count="29">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">".."</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">)</span> <span class="op">==</span> <span class="kw">null</span><span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>true</code></pre>
</div>
</div>
</section>
<section id="warnings-and-caveats" class="level2">
<h2 class="anchored" data-anchor-id="warnings-and-caveats">Warnings and caveats</h2>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>We strongly recommend against using <code>/</code> or <code>\</code> in key names. Similarly, <code>.</code> or <code>..</code> should not be used in between forward slashes, i.e.&nbsp;avoid (<code>/../</code> or <code>/./</code> in key names).</p>
</div>
</div>
<p>While we recommend against it, is it possible to use forward slash (<code>/</code>) or backslash (<code>\</code>) as field names for attributes. Since <code>/</code> is reserved to refer to the root attribute, it must be escaped with a backslash to refer to the literal string <code>"/"</code>.</p>
<p>The code below is not suitable for children, or anyone.</p>
<div id="7b4a6b73" class="cell" data-execution_count="30">
<details open="" class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode java code-with-copy"><code class="sourceCode java"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="dt">var</span> group <span class="op">=</span> <span class="st">"warnings"</span><span class="op">;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">createGroup</span><span class="op">(</span>group<span class="op">);</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"</span><span class="sc">\\</span><span class="st">/"</span><span class="op">,</span> <span class="st">"Please don't do this"</span><span class="op">);</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"</span><span class="sc">\\</span><span class="st">"</span><span class="op">,</span> <span class="st">"UGH"</span><span class="op">);</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"."</span><span class="op">,</span> <span class="st">"what does this mean!?"</span><span class="op">);</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">setAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"..</span><span class="sc">\\</span><span class="st">/."</span><span class="op">,</span> <span class="st">"...pain..."</span><span class="op">);</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a>n5<span class="op">.</span><span class="fu">getAttribute</span><span class="op">(</span>group<span class="op">,</span> <span class="st">"/"</span><span class="op">,</span> JsonElement<span class="op">.</span><span class="fu">class</span><span class="op">);</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-display" data-execution_count="30">
<pre><code>{"/":"Please don't do this","\\":"UGH",".":"what does this mean!?","../.":"...pain..."}</code></pre>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/imglib\.github\.io\/imglib2-blog");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>